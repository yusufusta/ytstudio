<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>ytstudio API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>ytstudio</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from hashlib import sha1
import time
import aiohttp
import asyncio
import aiofiles
from pyquery import PyQuery as pq
import js2py
import js2py.pyjs
import random
import os
import json
from .templates import Templates
import typing
import pathlib
import base64
import datetime


class Studio:
    YT_STUDIO_URL = &#34;https://studio.youtube.com&#34;
    USER_AGENT = &#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36&#34;
    TRANSFERRED_BYTES = 0
    CHUNK_SIZE = 64*1024

    def __init__(self, cookies: dict = {&#39;SESSION_TOKEN&#39;: &#39;&#39;, &#39;VISITOR_INFO1_LIVE&#39;: &#39;&#39;, &#39;PREF&#39;: &#39;&#39;, &#39;LOGIN_INFO&#39;: &#39;&#39;, &#39;SID&#39;: &#39;&#39;, &#39;__Secure-3PSID&#39;: &#39;.&#39;, &#39;HSID&#39;: &#39;&#39;,
                 &#39;SSID&#39;: &#39;&#39;, &#39;APISID&#39;: &#39;&#39;, &#39;SAPISID&#39;: &#39;&#39;, &#39;__Secure-3PAPISID&#39;: &#39;&#39;, &#39;YSC&#39;: &#39;&#39;, &#39;SIDCC&#39;: &#39;&#39;}):
        self.SAPISIDHASH = self.generateSAPISIDHASH(cookies[&#39;SAPISID&#39;])
        self.cookies = cookies
        self.Cookie = &#34; &#34;.join(
            [f&#34;{c}={cookies[c]};&#34; if not c in [&#34;SESSION_TOKEN&#34;, &#34;BOTGUARD_RESPONSE&#34;] else &#34;&#34; for c in cookies.keys()])
        self.HEADERS = {
            &#39;Authorization&#39;: f&#39;SAPISIDHASH {self.SAPISIDHASH}&#39;,
            &#39;Content-Type&#39;: &#39;application/json&#39;,
            &#39;Cookie&#39;: self.Cookie,
            &#39;X-Origin&#39;: self.YT_STUDIO_URL,
            &#39;User-Agent&#39;: self.USER_AGENT
        }
        self.session = aiohttp.ClientSession(headers=self.HEADERS)
        self.loop = asyncio.get_event_loop()
        self.config = {}
        self.js = js2py.EvalJs()
        self.js.execute(&#34;var window = {ytcfg: {}};&#34;)

    def __del__(self):
        asyncio.run(self.session.close())

    def generateSAPISIDHASH(self, SAPISID) -&gt; str:
        hash = f&#34;{round(time.time())} {SAPISID} {self.YT_STUDIO_URL}&#34;
        sifrelenmis = sha1(hash.encode(&#39;utf-8&#39;)).hexdigest()
        return f&#34;{round(time.time())}_{sifrelenmis}&#34;

    async def getMainPage(self) -&gt; str:
        page = await self.session.get(self.YT_STUDIO_URL)
        return await page.text(&#34;utf-8&#34;)

    async def login(self) -&gt; bool:
        &#34;&#34;&#34;
        Login to your youtube account
        &#34;&#34;&#34;
        page = await self.getMainPage()
        _ = pq(page)
        script = _(&#34;script&#34;)
        if len(script) &lt; 1:
            raise Exception(&#34;Didn&#39;t find script. Can you check your cookies?&#34;)
        script = script[0].text
        self.js.execute(
            f&#34;{script} window.ytcfg = ytcfg;&#34;)

        INNERTUBE_API_KEY = self.js.window.ytcfg.data_.INNERTUBE_API_KEY
        CHANNEL_ID = self.js.window.ytcfg.data_.CHANNEL_ID
        DELEGATED_SESSION_ID = self.js.window.ytcfg.data_.DELEGATED_SESSION_ID

        if INNERTUBE_API_KEY == None or CHANNEL_ID == None:
            raise Exception(
                &#34;Didn&#39;t find INNERTUBE_API_KEY or CHANNEL_ID. Can you check your cookies?&#34;)
        self.config = {&#39;INNERTUBE_API_KEY&#39;: INNERTUBE_API_KEY,
                       &#39;CHANNEL_ID&#39;: CHANNEL_ID, &#39;data_&#39;: self.js.window.ytcfg.data_}
        self.templates = Templates({
            &#39;channelId&#39;: CHANNEL_ID,
            &#39;sessionToken&#39;: self.cookies[&#39;SESSION_TOKEN&#39;],
            &#39;botguardResponse&#39;: self.cookies[&#39;BOTGUARD_RESPONSE&#39;] if &#39;BOTGUARD_RESPONSE&#39; in self.cookies else &#39;&#39;,
            &#39;delegatedSessionId&#39;: DELEGATED_SESSION_ID
        })

        return True

    def generateHash(self) -&gt; str:
        harfler = list(
            &#39;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#39;)
        keys = [&#39;&#39; for i in range(0, 36)]
        b = 0
        c = &#34;&#34;
        e = 0

        while e &lt; 36:
            if 8 == e or 13 == e or 18 == e or 23 == e:
                keys[e] = &#34;-&#34;
            else:
                if 14 == e:
                    keys[e] = &#34;4&#34;
                elif 2 &gt;= b:
                    b = round(33554432 + 16777216 * random.uniform(0, 0.9))
                c = b &amp; 15
                b = b &gt;&gt; 4
                keys[e] = harfler[c &amp; 3 | 8 if 19 == e else c]
            e += 1

        return &#34;&#34;.join(keys)

    async def fileSender(self, file_name):
        async with aiofiles.open(file_name, &#39;rb&#39;) as f:
            chunk = await f.read(self.CHUNK_SIZE)
            while chunk:
                if self.progress != None:
                    self.TRANSFERRED_BYTES += len(chunk)
                    self.progress(self.TRANSFERRED_BYTES,
                                  os.path.getsize(file_name))

                self.TRANSFERRED_BYTES += len(chunk)
                yield chunk
                chunk = await f.read(self.CHUNK_SIZE)
                if not chunk:
                    break

    async def uploadFileToYoutube(self, upload_url, file_path):
        self.TRANSFERRED_BYTES = 0

        uploaded = await self.session.post(upload_url,  headers={
            &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
            &#34;x-goog-upload-command&#34;: &#34;upload, finalize&#34;,
            &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
            &#34;x-goog-upload-offset&#34;: &#34;0&#34;,
            &#34;Referer&#34;: self.YT_STUDIO_URL,
        }, data=self.fileSender(file_path), timeout=None)
        _ = await uploaded.text(&#34;utf-8&#34;)
        _ = json.loads(_)
        return _[&#39;scottyResourceId&#39;]

    async def uploadVideo(self, file_name, title=f&#34;New Video {round(time.time())}&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, privacy=&#39;PRIVATE&#39;, draft=False, progress=None, extra_fields={}):
        &#34;&#34;&#34;
        Uploads a video to youtube.
        &#34;&#34;&#34;
        self.progress = progress
        frontEndUID = f&#34;innertube_studio:{self.generateHash()}:0&#34;

        uploadRequest = await self.session.post(&#34;https://upload.youtube.com/upload/studio&#34;,
                                                headers={
                                                    &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
                                                    &#34;x-goog-upload-command&#34;: &#34;start&#34;,
                                                    &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
                                                    &#34;x-goog-upload-protocol&#34;: &#34;resumable&#34;,
                                                    &#34;Referer&#34;: self.YT_STUDIO_URL,
                                                },
                                                json={&#39;frontendUploadId&#39;: frontEndUID})

        uploadUrl = uploadRequest.headers.get(&#34;x-goog-upload-url&#34;)
        scottyResourceId = await self.uploadFileToYoutube(uploadUrl, file_name)

        _data = self.templates.UPLOAD_VIDEO
        _data[&#34;resourceId&#34;][&#34;scottyResourceId&#34;][&#34;id&#34;] = scottyResourceId
        _data[&#34;frontendUploadId&#34;] = frontEndUID
        _data[&#34;initialMetadata&#34;] = {
            &#34;title&#34;: {
                &#34;newTitle&#34;: title
            },
            &#34;description&#34;: {
                &#34;newDescription&#34;: description,
                &#34;shouldSegment&#34;: True
            },
            &#34;privacy&#34;: {
                &#34;newPrivacy&#34;: privacy
            },
            &#34;draftState&#34;: {
                &#34;isDraft&#34;: draft
            },
        }
        _data[&#34;initialMetadata&#34;].update(extra_fields)

        upload = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/upload/createvideo?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )

        return await upload.json()

    async def deleteVideo(self, video_id):
        &#34;&#34;&#34;
        Delete video from your channel
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        delete = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video/delete?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.DELETE_VIDEO
        )
        return await delete.json()

    async def listVideos(self):
        &#34;&#34;&#34;
        Returns a list of videos in your channel
        &#34;&#34;&#34;
        list = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/creator/list_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.LIST_VIDEOS
        )
        return await list.json()

    async def getVideo(self, video_id):
        &#34;&#34;&#34;
        Get video data.
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        video = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/creator/get_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.GET_VIDEO
        )
        return await video.json()

    async def createPlaylist(self, title, privacy=&#34;PUBLIC&#34;) -&gt; dict:
        &#34;&#34;&#34;
        Create a new playlist.
        &#34;&#34;&#34;
        _data = self.templates.CREATE_PLAYLIST
        _data[&#34;title&#34;] = title
        _data[&#34;privacyStatus&#34;] = privacy

        create = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/playlist/create?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return await create.json()

    async def editVideo(self, video_id, title: str = &#34;&#34;, description: str = &#34;&#34;, privacy: str = &#34;&#34;, thumb: typing.Union[str, pathlib.Path, os.PathLike] = &#34;&#34;, tags: typing.List[str] = [], category: int = -1, monetization: bool = True, playlist: typing.List[str] = [], removeFromPlaylist: typing.List[str] = []):
        &#34;&#34;&#34;
        Edit video metadata.
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        _data = self.templates.METADATA_UPDATE
        if title != &#34;&#34;:
            _title = self.templates.METADATA_UPDATE_TITLE
            _title[&#34;title&#34;][&#34;newTitle&#34;] = title
            _data.update(_title)

        if description != &#34;&#34;:
            _description = self.templates.METADATA_UPDATE_DESCRIPTION
            _description[&#34;description&#34;][&#34;newDescription&#34;] = description
            _data.update(_description)

        if privacy != &#34;&#34;:
            _privacy = self.templates.METADATA_UPDATE_PRIVACY
            _privacy[&#34;privacy&#34;][&#34;newPrivacy&#34;] = privacy
            _data.update(_privacy)

        if thumb != &#34;&#34;:
            _thumb = self.templates.METADATA_UPDATE_THUMB
            image = open(thumb, &#39;rb&#39;)
            image_64_encode = base64.b64encode(image.read()).decode(&#39;utf-8&#39;)

            _thumb[&#34;videoStill&#34;][&#34;image&#34;][
                &#34;dataUri&#34;] = f&#34;data:image/png;base64,{image_64_encode}&#34;
            _data.update(_thumb)

        if len(tags) &gt; 0:
            _tags = self.templates.METADATA_UPDATE_TAGS
            _tags[&#34;tags&#34;][&#34;newTags&#34;] = tags
            _data.update(_tags)

        if category != -1:
            _category = self.templates.METADATA_UPDATE_CATEGORY
            _category[&#34;category&#34;][&#34;newCategoryId&#34;] = category
            _data.update(_category)

        if len(playlist) &gt; 0:
            _playlist = self.templates.METADATA_UPDATE_PLAYLIST
            _playlist[&#34;addToPlaylist&#34;][&#34;addToPlaylistIds&#34;] = playlist
            if len(removeFromPlaylist) &gt; 0:
                _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
            _data.update(_playlist)

        if len(removeFromPlaylist) &gt; 0:
            _playlist = self.templates.METADATA_UPDATE_PLAYLIST
            _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
            _data.update(_playlist)

        _monetization = self.templates.METADATA_UPDATE_MONETIZATION
        _monetization[&#34;monetizationSettings&#34;][&#34;newMonetization&#34;] = monetization
        _data.update(_monetization)

        update = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return await update.json()

    async def scheduledUploadVideo(self, file_name, title=&#34;New Video&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, now_privacy=&#39;PRIVATE&#39;, schedule_time: datetime.datetime | int = 0, scheduled_privacy=&#34;PUBLIC&#34;, progress=None, extra_fields={}):
        &#34;&#34;&#34;
        Scheduled uploads a video to youtube.
        &#34;&#34;&#34;
        upload = await self.uploadVideo(file_name, title, description, now_privacy, draft=True, progress=progress, extra_fields=extra_fields)
        if not &#34;videoId&#34; in upload:
            return upload

        self.templates.setVideoId(upload[&#34;videoId&#34;])

        _data = self.templates.METADATA_UPDATE
        _schedule = self.templates.METADATA_UPDATE_SCHEDULE

        if isinstance(schedule_time, datetime.datetime):
            schedule_time = int(schedule_time.timestamp())
        elif schedule_time == 0:
            schedule_time = int(datetime.datetime.now().timestamp()) + 60

        _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;timeSec&#34;] = schedule_time
        _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;privacy&#34;] = scheduled_privacy
        _schedule[&#34;privacyState&#34;][&#34;newPrivacy&#34;] = now_privacy

        _data.update(self.templates.METADATA_UPDATE_SCHEDULE)

        update = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return upload, await update.json()</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="ytstudio.templates" href="templates.html">ytstudio.templates</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ytstudio.Studio"><code class="flex name class">
<span>class <span class="ident">Studio</span></span>
<span>(</span><span>cookies: dict = {'SESSION_TOKEN': '', 'VISITOR_INFO1_LIVE': '', 'PREF': '', 'LOGIN_INFO': '', 'SID': '', '__Secure-3PSID': '.', 'HSID': '', 'SSID': '', 'APISID': '', 'SAPISID': '', '__Secure-3PAPISID': '', 'YSC': '', 'SIDCC': ''})</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Studio:
    YT_STUDIO_URL = &#34;https://studio.youtube.com&#34;
    USER_AGENT = &#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36&#34;
    TRANSFERRED_BYTES = 0
    CHUNK_SIZE = 64*1024

    def __init__(self, cookies: dict = {&#39;SESSION_TOKEN&#39;: &#39;&#39;, &#39;VISITOR_INFO1_LIVE&#39;: &#39;&#39;, &#39;PREF&#39;: &#39;&#39;, &#39;LOGIN_INFO&#39;: &#39;&#39;, &#39;SID&#39;: &#39;&#39;, &#39;__Secure-3PSID&#39;: &#39;.&#39;, &#39;HSID&#39;: &#39;&#39;,
                 &#39;SSID&#39;: &#39;&#39;, &#39;APISID&#39;: &#39;&#39;, &#39;SAPISID&#39;: &#39;&#39;, &#39;__Secure-3PAPISID&#39;: &#39;&#39;, &#39;YSC&#39;: &#39;&#39;, &#39;SIDCC&#39;: &#39;&#39;}):
        self.SAPISIDHASH = self.generateSAPISIDHASH(cookies[&#39;SAPISID&#39;])
        self.cookies = cookies
        self.Cookie = &#34; &#34;.join(
            [f&#34;{c}={cookies[c]};&#34; if not c in [&#34;SESSION_TOKEN&#34;, &#34;BOTGUARD_RESPONSE&#34;] else &#34;&#34; for c in cookies.keys()])
        self.HEADERS = {
            &#39;Authorization&#39;: f&#39;SAPISIDHASH {self.SAPISIDHASH}&#39;,
            &#39;Content-Type&#39;: &#39;application/json&#39;,
            &#39;Cookie&#39;: self.Cookie,
            &#39;X-Origin&#39;: self.YT_STUDIO_URL,
            &#39;User-Agent&#39;: self.USER_AGENT
        }
        self.session = aiohttp.ClientSession(headers=self.HEADERS)
        self.loop = asyncio.get_event_loop()
        self.config = {}
        self.js = js2py.EvalJs()
        self.js.execute(&#34;var window = {ytcfg: {}};&#34;)

    def __del__(self):
        asyncio.run(self.session.close())

    def generateSAPISIDHASH(self, SAPISID) -&gt; str:
        hash = f&#34;{round(time.time())} {SAPISID} {self.YT_STUDIO_URL}&#34;
        sifrelenmis = sha1(hash.encode(&#39;utf-8&#39;)).hexdigest()
        return f&#34;{round(time.time())}_{sifrelenmis}&#34;

    async def getMainPage(self) -&gt; str:
        page = await self.session.get(self.YT_STUDIO_URL)
        return await page.text(&#34;utf-8&#34;)

    async def login(self) -&gt; bool:
        &#34;&#34;&#34;
        Login to your youtube account
        &#34;&#34;&#34;
        page = await self.getMainPage()
        _ = pq(page)
        script = _(&#34;script&#34;)
        if len(script) &lt; 1:
            raise Exception(&#34;Didn&#39;t find script. Can you check your cookies?&#34;)
        script = script[0].text
        self.js.execute(
            f&#34;{script} window.ytcfg = ytcfg;&#34;)

        INNERTUBE_API_KEY = self.js.window.ytcfg.data_.INNERTUBE_API_KEY
        CHANNEL_ID = self.js.window.ytcfg.data_.CHANNEL_ID
        DELEGATED_SESSION_ID = self.js.window.ytcfg.data_.DELEGATED_SESSION_ID

        if INNERTUBE_API_KEY == None or CHANNEL_ID == None:
            raise Exception(
                &#34;Didn&#39;t find INNERTUBE_API_KEY or CHANNEL_ID. Can you check your cookies?&#34;)
        self.config = {&#39;INNERTUBE_API_KEY&#39;: INNERTUBE_API_KEY,
                       &#39;CHANNEL_ID&#39;: CHANNEL_ID, &#39;data_&#39;: self.js.window.ytcfg.data_}
        self.templates = Templates({
            &#39;channelId&#39;: CHANNEL_ID,
            &#39;sessionToken&#39;: self.cookies[&#39;SESSION_TOKEN&#39;],
            &#39;botguardResponse&#39;: self.cookies[&#39;BOTGUARD_RESPONSE&#39;] if &#39;BOTGUARD_RESPONSE&#39; in self.cookies else &#39;&#39;,
            &#39;delegatedSessionId&#39;: DELEGATED_SESSION_ID
        })

        return True

    def generateHash(self) -&gt; str:
        harfler = list(
            &#39;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#39;)
        keys = [&#39;&#39; for i in range(0, 36)]
        b = 0
        c = &#34;&#34;
        e = 0

        while e &lt; 36:
            if 8 == e or 13 == e or 18 == e or 23 == e:
                keys[e] = &#34;-&#34;
            else:
                if 14 == e:
                    keys[e] = &#34;4&#34;
                elif 2 &gt;= b:
                    b = round(33554432 + 16777216 * random.uniform(0, 0.9))
                c = b &amp; 15
                b = b &gt;&gt; 4
                keys[e] = harfler[c &amp; 3 | 8 if 19 == e else c]
            e += 1

        return &#34;&#34;.join(keys)

    async def fileSender(self, file_name):
        async with aiofiles.open(file_name, &#39;rb&#39;) as f:
            chunk = await f.read(self.CHUNK_SIZE)
            while chunk:
                if self.progress != None:
                    self.TRANSFERRED_BYTES += len(chunk)
                    self.progress(self.TRANSFERRED_BYTES,
                                  os.path.getsize(file_name))

                self.TRANSFERRED_BYTES += len(chunk)
                yield chunk
                chunk = await f.read(self.CHUNK_SIZE)
                if not chunk:
                    break

    async def uploadFileToYoutube(self, upload_url, file_path):
        self.TRANSFERRED_BYTES = 0

        uploaded = await self.session.post(upload_url,  headers={
            &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
            &#34;x-goog-upload-command&#34;: &#34;upload, finalize&#34;,
            &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
            &#34;x-goog-upload-offset&#34;: &#34;0&#34;,
            &#34;Referer&#34;: self.YT_STUDIO_URL,
        }, data=self.fileSender(file_path), timeout=None)
        _ = await uploaded.text(&#34;utf-8&#34;)
        _ = json.loads(_)
        return _[&#39;scottyResourceId&#39;]

    async def uploadVideo(self, file_name, title=f&#34;New Video {round(time.time())}&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, privacy=&#39;PRIVATE&#39;, draft=False, progress=None, extra_fields={}):
        &#34;&#34;&#34;
        Uploads a video to youtube.
        &#34;&#34;&#34;
        self.progress = progress
        frontEndUID = f&#34;innertube_studio:{self.generateHash()}:0&#34;

        uploadRequest = await self.session.post(&#34;https://upload.youtube.com/upload/studio&#34;,
                                                headers={
                                                    &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
                                                    &#34;x-goog-upload-command&#34;: &#34;start&#34;,
                                                    &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
                                                    &#34;x-goog-upload-protocol&#34;: &#34;resumable&#34;,
                                                    &#34;Referer&#34;: self.YT_STUDIO_URL,
                                                },
                                                json={&#39;frontendUploadId&#39;: frontEndUID})

        uploadUrl = uploadRequest.headers.get(&#34;x-goog-upload-url&#34;)
        scottyResourceId = await self.uploadFileToYoutube(uploadUrl, file_name)

        _data = self.templates.UPLOAD_VIDEO
        _data[&#34;resourceId&#34;][&#34;scottyResourceId&#34;][&#34;id&#34;] = scottyResourceId
        _data[&#34;frontendUploadId&#34;] = frontEndUID
        _data[&#34;initialMetadata&#34;] = {
            &#34;title&#34;: {
                &#34;newTitle&#34;: title
            },
            &#34;description&#34;: {
                &#34;newDescription&#34;: description,
                &#34;shouldSegment&#34;: True
            },
            &#34;privacy&#34;: {
                &#34;newPrivacy&#34;: privacy
            },
            &#34;draftState&#34;: {
                &#34;isDraft&#34;: draft
            },
        }
        _data[&#34;initialMetadata&#34;].update(extra_fields)

        upload = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/upload/createvideo?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )

        return await upload.json()

    async def deleteVideo(self, video_id):
        &#34;&#34;&#34;
        Delete video from your channel
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        delete = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video/delete?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.DELETE_VIDEO
        )
        return await delete.json()

    async def listVideos(self):
        &#34;&#34;&#34;
        Returns a list of videos in your channel
        &#34;&#34;&#34;
        list = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/creator/list_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.LIST_VIDEOS
        )
        return await list.json()

    async def getVideo(self, video_id):
        &#34;&#34;&#34;
        Get video data.
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        video = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/creator/get_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=self.templates.GET_VIDEO
        )
        return await video.json()

    async def createPlaylist(self, title, privacy=&#34;PUBLIC&#34;) -&gt; dict:
        &#34;&#34;&#34;
        Create a new playlist.
        &#34;&#34;&#34;
        _data = self.templates.CREATE_PLAYLIST
        _data[&#34;title&#34;] = title
        _data[&#34;privacyStatus&#34;] = privacy

        create = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/playlist/create?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return await create.json()

    async def editVideo(self, video_id, title: str = &#34;&#34;, description: str = &#34;&#34;, privacy: str = &#34;&#34;, thumb: typing.Union[str, pathlib.Path, os.PathLike] = &#34;&#34;, tags: typing.List[str] = [], category: int = -1, monetization: bool = True, playlist: typing.List[str] = [], removeFromPlaylist: typing.List[str] = []):
        &#34;&#34;&#34;
        Edit video metadata.
        &#34;&#34;&#34;
        self.templates.setVideoId(video_id)
        _data = self.templates.METADATA_UPDATE
        if title != &#34;&#34;:
            _title = self.templates.METADATA_UPDATE_TITLE
            _title[&#34;title&#34;][&#34;newTitle&#34;] = title
            _data.update(_title)

        if description != &#34;&#34;:
            _description = self.templates.METADATA_UPDATE_DESCRIPTION
            _description[&#34;description&#34;][&#34;newDescription&#34;] = description
            _data.update(_description)

        if privacy != &#34;&#34;:
            _privacy = self.templates.METADATA_UPDATE_PRIVACY
            _privacy[&#34;privacy&#34;][&#34;newPrivacy&#34;] = privacy
            _data.update(_privacy)

        if thumb != &#34;&#34;:
            _thumb = self.templates.METADATA_UPDATE_THUMB
            image = open(thumb, &#39;rb&#39;)
            image_64_encode = base64.b64encode(image.read()).decode(&#39;utf-8&#39;)

            _thumb[&#34;videoStill&#34;][&#34;image&#34;][
                &#34;dataUri&#34;] = f&#34;data:image/png;base64,{image_64_encode}&#34;
            _data.update(_thumb)

        if len(tags) &gt; 0:
            _tags = self.templates.METADATA_UPDATE_TAGS
            _tags[&#34;tags&#34;][&#34;newTags&#34;] = tags
            _data.update(_tags)

        if category != -1:
            _category = self.templates.METADATA_UPDATE_CATEGORY
            _category[&#34;category&#34;][&#34;newCategoryId&#34;] = category
            _data.update(_category)

        if len(playlist) &gt; 0:
            _playlist = self.templates.METADATA_UPDATE_PLAYLIST
            _playlist[&#34;addToPlaylist&#34;][&#34;addToPlaylistIds&#34;] = playlist
            if len(removeFromPlaylist) &gt; 0:
                _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
            _data.update(_playlist)

        if len(removeFromPlaylist) &gt; 0:
            _playlist = self.templates.METADATA_UPDATE_PLAYLIST
            _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
            _data.update(_playlist)

        _monetization = self.templates.METADATA_UPDATE_MONETIZATION
        _monetization[&#34;monetizationSettings&#34;][&#34;newMonetization&#34;] = monetization
        _data.update(_monetization)

        update = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return await update.json()

    async def scheduledUploadVideo(self, file_name, title=&#34;New Video&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, now_privacy=&#39;PRIVATE&#39;, schedule_time: datetime.datetime | int = 0, scheduled_privacy=&#34;PUBLIC&#34;, progress=None, extra_fields={}):
        &#34;&#34;&#34;
        Scheduled uploads a video to youtube.
        &#34;&#34;&#34;
        upload = await self.uploadVideo(file_name, title, description, now_privacy, draft=True, progress=progress, extra_fields=extra_fields)
        if not &#34;videoId&#34; in upload:
            return upload

        self.templates.setVideoId(upload[&#34;videoId&#34;])

        _data = self.templates.METADATA_UPDATE
        _schedule = self.templates.METADATA_UPDATE_SCHEDULE

        if isinstance(schedule_time, datetime.datetime):
            schedule_time = int(schedule_time.timestamp())
        elif schedule_time == 0:
            schedule_time = int(datetime.datetime.now().timestamp()) + 60

        _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;timeSec&#34;] = schedule_time
        _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;privacy&#34;] = scheduled_privacy
        _schedule[&#34;privacyState&#34;][&#34;newPrivacy&#34;] = now_privacy

        _data.update(self.templates.METADATA_UPDATE_SCHEDULE)

        update = await self.session.post(
            f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
            json=_data
        )
        return upload, await update.json()</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="ytstudio.Studio.CHUNK_SIZE"><code class="name">var <span class="ident">CHUNK_SIZE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ytstudio.Studio.TRANSFERRED_BYTES"><code class="name">var <span class="ident">TRANSFERRED_BYTES</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ytstudio.Studio.USER_AGENT"><code class="name">var <span class="ident">USER_AGENT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ytstudio.Studio.YT_STUDIO_URL"><code class="name">var <span class="ident">YT_STUDIO_URL</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ytstudio.Studio.createPlaylist"><code class="name flex">
<span>async def <span class="ident">createPlaylist</span></span>(<span>self, title, privacy='PUBLIC') ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new playlist.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def createPlaylist(self, title, privacy=&#34;PUBLIC&#34;) -&gt; dict:
    &#34;&#34;&#34;
    Create a new playlist.
    &#34;&#34;&#34;
    _data = self.templates.CREATE_PLAYLIST
    _data[&#34;title&#34;] = title
    _data[&#34;privacyStatus&#34;] = privacy

    create = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/playlist/create?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=_data
    )
    return await create.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.deleteVideo"><code class="name flex">
<span>async def <span class="ident">deleteVideo</span></span>(<span>self, video_id)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete video from your channel</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def deleteVideo(self, video_id):
    &#34;&#34;&#34;
    Delete video from your channel
    &#34;&#34;&#34;
    self.templates.setVideoId(video_id)
    delete = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/video/delete?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=self.templates.DELETE_VIDEO
    )
    return await delete.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.editVideo"><code class="name flex">
<span>async def <span class="ident">editVideo</span></span>(<span>self, video_id, title: str = '', description: str = '', privacy: str = '', thumb: Union[str, pathlib.Path, os.PathLike] = '', tags: List[str] = [], category: int = -1, monetization: bool = True, playlist: List[str] = [], removeFromPlaylist: List[str] = [])</span>
</code></dt>
<dd>
<div class="desc"><p>Edit video metadata.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def editVideo(self, video_id, title: str = &#34;&#34;, description: str = &#34;&#34;, privacy: str = &#34;&#34;, thumb: typing.Union[str, pathlib.Path, os.PathLike] = &#34;&#34;, tags: typing.List[str] = [], category: int = -1, monetization: bool = True, playlist: typing.List[str] = [], removeFromPlaylist: typing.List[str] = []):
    &#34;&#34;&#34;
    Edit video metadata.
    &#34;&#34;&#34;
    self.templates.setVideoId(video_id)
    _data = self.templates.METADATA_UPDATE
    if title != &#34;&#34;:
        _title = self.templates.METADATA_UPDATE_TITLE
        _title[&#34;title&#34;][&#34;newTitle&#34;] = title
        _data.update(_title)

    if description != &#34;&#34;:
        _description = self.templates.METADATA_UPDATE_DESCRIPTION
        _description[&#34;description&#34;][&#34;newDescription&#34;] = description
        _data.update(_description)

    if privacy != &#34;&#34;:
        _privacy = self.templates.METADATA_UPDATE_PRIVACY
        _privacy[&#34;privacy&#34;][&#34;newPrivacy&#34;] = privacy
        _data.update(_privacy)

    if thumb != &#34;&#34;:
        _thumb = self.templates.METADATA_UPDATE_THUMB
        image = open(thumb, &#39;rb&#39;)
        image_64_encode = base64.b64encode(image.read()).decode(&#39;utf-8&#39;)

        _thumb[&#34;videoStill&#34;][&#34;image&#34;][
            &#34;dataUri&#34;] = f&#34;data:image/png;base64,{image_64_encode}&#34;
        _data.update(_thumb)

    if len(tags) &gt; 0:
        _tags = self.templates.METADATA_UPDATE_TAGS
        _tags[&#34;tags&#34;][&#34;newTags&#34;] = tags
        _data.update(_tags)

    if category != -1:
        _category = self.templates.METADATA_UPDATE_CATEGORY
        _category[&#34;category&#34;][&#34;newCategoryId&#34;] = category
        _data.update(_category)

    if len(playlist) &gt; 0:
        _playlist = self.templates.METADATA_UPDATE_PLAYLIST
        _playlist[&#34;addToPlaylist&#34;][&#34;addToPlaylistIds&#34;] = playlist
        if len(removeFromPlaylist) &gt; 0:
            _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
        _data.update(_playlist)

    if len(removeFromPlaylist) &gt; 0:
        _playlist = self.templates.METADATA_UPDATE_PLAYLIST
        _playlist[&#34;addToPlaylist&#34;][&#34;deleteFromPlaylistIds&#34;] = removeFromPlaylist
        _data.update(_playlist)

    _monetization = self.templates.METADATA_UPDATE_MONETIZATION
    _monetization[&#34;monetizationSettings&#34;][&#34;newMonetization&#34;] = monetization
    _data.update(_monetization)

    update = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=_data
    )
    return await update.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.fileSender"><code class="name flex">
<span>async def <span class="ident">fileSender</span></span>(<span>self, file_name)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def fileSender(self, file_name):
    async with aiofiles.open(file_name, &#39;rb&#39;) as f:
        chunk = await f.read(self.CHUNK_SIZE)
        while chunk:
            if self.progress != None:
                self.TRANSFERRED_BYTES += len(chunk)
                self.progress(self.TRANSFERRED_BYTES,
                              os.path.getsize(file_name))

            self.TRANSFERRED_BYTES += len(chunk)
            yield chunk
            chunk = await f.read(self.CHUNK_SIZE)
            if not chunk:
                break</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.generateHash"><code class="name flex">
<span>def <span class="ident">generateHash</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generateHash(self) -&gt; str:
    harfler = list(
        &#39;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#39;)
    keys = [&#39;&#39; for i in range(0, 36)]
    b = 0
    c = &#34;&#34;
    e = 0

    while e &lt; 36:
        if 8 == e or 13 == e or 18 == e or 23 == e:
            keys[e] = &#34;-&#34;
        else:
            if 14 == e:
                keys[e] = &#34;4&#34;
            elif 2 &gt;= b:
                b = round(33554432 + 16777216 * random.uniform(0, 0.9))
            c = b &amp; 15
            b = b &gt;&gt; 4
            keys[e] = harfler[c &amp; 3 | 8 if 19 == e else c]
        e += 1

    return &#34;&#34;.join(keys)</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.generateSAPISIDHASH"><code class="name flex">
<span>def <span class="ident">generateSAPISIDHASH</span></span>(<span>self, SAPISID) ‑> str</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generateSAPISIDHASH(self, SAPISID) -&gt; str:
    hash = f&#34;{round(time.time())} {SAPISID} {self.YT_STUDIO_URL}&#34;
    sifrelenmis = sha1(hash.encode(&#39;utf-8&#39;)).hexdigest()
    return f&#34;{round(time.time())}_{sifrelenmis}&#34;</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.getMainPage"><code class="name flex">
<span>async def <span class="ident">getMainPage</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def getMainPage(self) -&gt; str:
    page = await self.session.get(self.YT_STUDIO_URL)
    return await page.text(&#34;utf-8&#34;)</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.getVideo"><code class="name flex">
<span>async def <span class="ident">getVideo</span></span>(<span>self, video_id)</span>
</code></dt>
<dd>
<div class="desc"><p>Get video data.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def getVideo(self, video_id):
    &#34;&#34;&#34;
    Get video data.
    &#34;&#34;&#34;
    self.templates.setVideoId(video_id)
    video = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/creator/get_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=self.templates.GET_VIDEO
    )
    return await video.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.listVideos"><code class="name flex">
<span>async def <span class="ident">listVideos</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a list of videos in your channel</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def listVideos(self):
    &#34;&#34;&#34;
    Returns a list of videos in your channel
    &#34;&#34;&#34;
    list = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/creator/list_creator_videos?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=self.templates.LIST_VIDEOS
    )
    return await list.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.login"><code class="name flex">
<span>async def <span class="ident">login</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Login to your youtube account</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def login(self) -&gt; bool:
    &#34;&#34;&#34;
    Login to your youtube account
    &#34;&#34;&#34;
    page = await self.getMainPage()
    _ = pq(page)
    script = _(&#34;script&#34;)
    if len(script) &lt; 1:
        raise Exception(&#34;Didn&#39;t find script. Can you check your cookies?&#34;)
    script = script[0].text
    self.js.execute(
        f&#34;{script} window.ytcfg = ytcfg;&#34;)

    INNERTUBE_API_KEY = self.js.window.ytcfg.data_.INNERTUBE_API_KEY
    CHANNEL_ID = self.js.window.ytcfg.data_.CHANNEL_ID
    DELEGATED_SESSION_ID = self.js.window.ytcfg.data_.DELEGATED_SESSION_ID

    if INNERTUBE_API_KEY == None or CHANNEL_ID == None:
        raise Exception(
            &#34;Didn&#39;t find INNERTUBE_API_KEY or CHANNEL_ID. Can you check your cookies?&#34;)
    self.config = {&#39;INNERTUBE_API_KEY&#39;: INNERTUBE_API_KEY,
                   &#39;CHANNEL_ID&#39;: CHANNEL_ID, &#39;data_&#39;: self.js.window.ytcfg.data_}
    self.templates = Templates({
        &#39;channelId&#39;: CHANNEL_ID,
        &#39;sessionToken&#39;: self.cookies[&#39;SESSION_TOKEN&#39;],
        &#39;botguardResponse&#39;: self.cookies[&#39;BOTGUARD_RESPONSE&#39;] if &#39;BOTGUARD_RESPONSE&#39; in self.cookies else &#39;&#39;,
        &#39;delegatedSessionId&#39;: DELEGATED_SESSION_ID
    })

    return True</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.scheduledUploadVideo"><code class="name flex">
<span>async def <span class="ident">scheduledUploadVideo</span></span>(<span>self, file_name, title='New Video', description='This video uploaded by github.com/yusufusta/ytstudio', now_privacy='PRIVATE', schedule_time: datetime.datetime | int = 0, scheduled_privacy='PUBLIC', progress=None, extra_fields={})</span>
</code></dt>
<dd>
<div class="desc"><p>Scheduled uploads a video to youtube.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def scheduledUploadVideo(self, file_name, title=&#34;New Video&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, now_privacy=&#39;PRIVATE&#39;, schedule_time: datetime.datetime | int = 0, scheduled_privacy=&#34;PUBLIC&#34;, progress=None, extra_fields={}):
    &#34;&#34;&#34;
    Scheduled uploads a video to youtube.
    &#34;&#34;&#34;
    upload = await self.uploadVideo(file_name, title, description, now_privacy, draft=True, progress=progress, extra_fields=extra_fields)
    if not &#34;videoId&#34; in upload:
        return upload

    self.templates.setVideoId(upload[&#34;videoId&#34;])

    _data = self.templates.METADATA_UPDATE
    _schedule = self.templates.METADATA_UPDATE_SCHEDULE

    if isinstance(schedule_time, datetime.datetime):
        schedule_time = int(schedule_time.timestamp())
    elif schedule_time == 0:
        schedule_time = int(datetime.datetime.now().timestamp()) + 60

    _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;timeSec&#34;] = schedule_time
    _schedule[&#34;scheduledPublishing&#34;][&#34;set&#34;][&#34;privacy&#34;] = scheduled_privacy
    _schedule[&#34;privacyState&#34;][&#34;newPrivacy&#34;] = now_privacy

    _data.update(self.templates.METADATA_UPDATE_SCHEDULE)

    update = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/video_manager/metadata_update?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=_data
    )
    return upload, await update.json()</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.uploadFileToYoutube"><code class="name flex">
<span>async def <span class="ident">uploadFileToYoutube</span></span>(<span>self, upload_url, file_path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def uploadFileToYoutube(self, upload_url, file_path):
    self.TRANSFERRED_BYTES = 0

    uploaded = await self.session.post(upload_url,  headers={
        &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
        &#34;x-goog-upload-command&#34;: &#34;upload, finalize&#34;,
        &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
        &#34;x-goog-upload-offset&#34;: &#34;0&#34;,
        &#34;Referer&#34;: self.YT_STUDIO_URL,
    }, data=self.fileSender(file_path), timeout=None)
    _ = await uploaded.text(&#34;utf-8&#34;)
    _ = json.loads(_)
    return _[&#39;scottyResourceId&#39;]</code></pre>
</details>
</dd>
<dt id="ytstudio.Studio.uploadVideo"><code class="name flex">
<span>async def <span class="ident">uploadVideo</span></span>(<span>self, file_name, title='New Video 1675980145', description='This video uploaded by github.com/yusufusta/ytstudio', privacy='PRIVATE', draft=False, progress=None, extra_fields={})</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a video to youtube.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def uploadVideo(self, file_name, title=f&#34;New Video {round(time.time())}&#34;, description=&#39;This video uploaded by github.com/yusufusta/ytstudio&#39;, privacy=&#39;PRIVATE&#39;, draft=False, progress=None, extra_fields={}):
    &#34;&#34;&#34;
    Uploads a video to youtube.
    &#34;&#34;&#34;
    self.progress = progress
    frontEndUID = f&#34;innertube_studio:{self.generateHash()}:0&#34;

    uploadRequest = await self.session.post(&#34;https://upload.youtube.com/upload/studio&#34;,
                                            headers={
                                                &#34;Content-Type&#34;: &#34;application/x-www-form-urlencoded;charset=utf-8&#39;&#34;,
                                                &#34;x-goog-upload-command&#34;: &#34;start&#34;,
                                                &#34;x-goog-upload-file-name&#34;: f&#34;file-{round(time.time())}&#34;,
                                                &#34;x-goog-upload-protocol&#34;: &#34;resumable&#34;,
                                                &#34;Referer&#34;: self.YT_STUDIO_URL,
                                            },
                                            json={&#39;frontendUploadId&#39;: frontEndUID})

    uploadUrl = uploadRequest.headers.get(&#34;x-goog-upload-url&#34;)
    scottyResourceId = await self.uploadFileToYoutube(uploadUrl, file_name)

    _data = self.templates.UPLOAD_VIDEO
    _data[&#34;resourceId&#34;][&#34;scottyResourceId&#34;][&#34;id&#34;] = scottyResourceId
    _data[&#34;frontendUploadId&#34;] = frontEndUID
    _data[&#34;initialMetadata&#34;] = {
        &#34;title&#34;: {
            &#34;newTitle&#34;: title
        },
        &#34;description&#34;: {
            &#34;newDescription&#34;: description,
            &#34;shouldSegment&#34;: True
        },
        &#34;privacy&#34;: {
            &#34;newPrivacy&#34;: privacy
        },
        &#34;draftState&#34;: {
            &#34;isDraft&#34;: draft
        },
    }
    _data[&#34;initialMetadata&#34;].update(extra_fields)

    upload = await self.session.post(
        f&#34;https://studio.youtube.com/youtubei/v1/upload/createvideo?alt=json&amp;key={self.config[&#39;INNERTUBE_API_KEY&#39;]}&#34;,
        json=_data
    )

    return await upload.json()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="ytstudio.templates" href="templates.html">ytstudio.templates</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ytstudio.Studio" href="#ytstudio.Studio">Studio</a></code></h4>
<ul class="">
<li><code><a title="ytstudio.Studio.CHUNK_SIZE" href="#ytstudio.Studio.CHUNK_SIZE">CHUNK_SIZE</a></code></li>
<li><code><a title="ytstudio.Studio.TRANSFERRED_BYTES" href="#ytstudio.Studio.TRANSFERRED_BYTES">TRANSFERRED_BYTES</a></code></li>
<li><code><a title="ytstudio.Studio.USER_AGENT" href="#ytstudio.Studio.USER_AGENT">USER_AGENT</a></code></li>
<li><code><a title="ytstudio.Studio.YT_STUDIO_URL" href="#ytstudio.Studio.YT_STUDIO_URL">YT_STUDIO_URL</a></code></li>
<li><code><a title="ytstudio.Studio.createPlaylist" href="#ytstudio.Studio.createPlaylist">createPlaylist</a></code></li>
<li><code><a title="ytstudio.Studio.deleteVideo" href="#ytstudio.Studio.deleteVideo">deleteVideo</a></code></li>
<li><code><a title="ytstudio.Studio.editVideo" href="#ytstudio.Studio.editVideo">editVideo</a></code></li>
<li><code><a title="ytstudio.Studio.fileSender" href="#ytstudio.Studio.fileSender">fileSender</a></code></li>
<li><code><a title="ytstudio.Studio.generateHash" href="#ytstudio.Studio.generateHash">generateHash</a></code></li>
<li><code><a title="ytstudio.Studio.generateSAPISIDHASH" href="#ytstudio.Studio.generateSAPISIDHASH">generateSAPISIDHASH</a></code></li>
<li><code><a title="ytstudio.Studio.getMainPage" href="#ytstudio.Studio.getMainPage">getMainPage</a></code></li>
<li><code><a title="ytstudio.Studio.getVideo" href="#ytstudio.Studio.getVideo">getVideo</a></code></li>
<li><code><a title="ytstudio.Studio.listVideos" href="#ytstudio.Studio.listVideos">listVideos</a></code></li>
<li><code><a title="ytstudio.Studio.login" href="#ytstudio.Studio.login">login</a></code></li>
<li><code><a title="ytstudio.Studio.scheduledUploadVideo" href="#ytstudio.Studio.scheduledUploadVideo">scheduledUploadVideo</a></code></li>
<li><code><a title="ytstudio.Studio.uploadFileToYoutube" href="#ytstudio.Studio.uploadFileToYoutube">uploadFileToYoutube</a></code></li>
<li><code><a title="ytstudio.Studio.uploadVideo" href="#ytstudio.Studio.uploadVideo">uploadVideo</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>